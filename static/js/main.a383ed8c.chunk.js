(this["webpackJsonpstore-pedraza-juan"]=this["webpackJsonpstore-pedraza-juan"]||[]).push([[0],{83:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(4),i=n(0),o=n.n(i),r=n(10),a=n.n(r),s=(n(83),n(120)),l=n(123),u=n(125),d=n(126),h=Object(s.a)((function(e){return{header:{height:"200px",padding:e.spacing(1),marginBottom:e.spacing(1),display:"flex",justifyContent:"center",alignItems:"center"}}})),p=function(e){var t=h();return Object(c.jsx)(l.a,{position:"static",className:t.header,color:"secondary",children:Object(c.jsx)(u.a,{children:Object(c.jsx)(d.a,{variant:"h3",children:"Pedra Puntos"})})})},f=n(15),j=n(127),g=n(128),b=n(71),O=n(140),m=n(129),x=n(130),y=n(141),C=n(136),I=n(142),v=n(139),R=n(68),A=n.n(R),E=n(67),N=n.n(E),T=n(25),S=n(65),z=n(28),D=Object(T.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER":return t.user;case"ADDPOINTS":return Object(z.a)(Object(z.a)({},e),{},{points:t.newPoints});default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCTS":case"REDEEM_HISTORY":return t.products;default:return e}},loadingReducer:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return t.isLoading;default:return e}},isRedeemHistoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_REDEEMHISTORY":return t.isRedeemHistory;default:return e}},filtersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{category:"",price:[0,3e3]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CATEGORY":return Object(z.a)(Object(z.a)({},e),{},{category:t.category});case"PRICE":return Object(z.a)(Object(z.a)({},e),{},{price:t.price});default:return e}},redeemProductReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS":case"FAILED":return t.type;case"RESET":return"";default:return e}}}),P=Object(T.d)(D,Object(T.a)(S.a)),w=Object(s.a)((function(e){return{home:{flexGrow:"0.5"},homeButton:{fontsize:"larger"},filter:{flexGrow:"2",display:"flex",justifyContent:"space-between"},select:{"&:before":{borderColor:"white"},"&:after":{borderColor:"white"}},filterTypo:{display:"flex",flexDirection:"column",justifyContent:"center",marginRight:e.spacing(2)},slider:{flexGrow:"1",padding:e.spacing(0,2)},points:{flexGrow:"1",display:"flex",justifyContent:"flex-end"},pointsMenu:{display:"flex",justifyContent:"center",alignItems:"center"},addPointsButton:{margin:e.spacing(0),padding:e.spacing(0)},flexbox:{display:"flex",justifyContent:"space-between"},formControl:{margin:e.spacing(1),minWidth:120}}}));var J=function(e){var t=e.user,n=e.fetchAddPoints,i=o.a.useState(null),r=Object(f.a)(i,2),a=r[0],s=r[1],l=w(),u=function(e){s(null),n(e)};return Object(c.jsxs)("div",{className:l.pointsMenu,children:[Object(c.jsx)(N.a,{}),Object(c.jsx)(d.a,{children:t?t.points:Object(c.jsx)(m.a,{})}),Object(c.jsx)(g.a,{style:{paddingTop:"0px"},"aria-label":"add-points","aria-controls":"add-points","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",children:Object(c.jsx)(A.a,{style:{color:"#4caf50",fontSize:"medium"}})}),Object(c.jsxs)(b.a,{id:"add-points",anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"center"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(a),onClose:u,getContentAnchorEl:null,children:[Object(c.jsx)(O.a,{onClick:function(){return u(1e3)},children:"1000 pts"}),Object(c.jsx)(O.a,{onClick:function(){return u(5e3)},children:"5000 pts "}),Object(c.jsx)(O.a,{onClick:function(){return u(7500)},children:"7500 pts"})]})]})},U=function(e){var t=e.categorities,n=o.a.useState(""),i=Object(f.a)(n,2),r=i[0],a=i[1],s=w();return Object(c.jsxs)(x.a,{variant:"outlined",className:s.formControl,children:[Object(c.jsx)(y.a,{htmlFor:"categoria-select",children:"Categor\xeda"}),Object(c.jsxs)(C.a,{native:!0,className:s.select,value:r,onChange:function(e){a(e.target.value),P.dispatch(function(e){return{type:"CATEGORY",category:e}}(e.target.value))},label:"Categoria",inputProps:{name:"Categoria",id:"categoria-select"},children:[Object(c.jsx)("option",{"aria-label":"None",value:""}),t.map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}))]})]})},M=function(){var e=w(),t=o.a.useState([0,3e3]),n=Object(f.a)(t,2),i=n[0],r=n[1];return Object(c.jsxs)("div",{className:e.slider,children:[Object(c.jsx)(d.a,{id:"range-slider",gutterBottom:!0,children:"Rango de precios"}),Object(c.jsx)(I.a,{value:i,onChange:function(e,t){r(t)},onChangeCommitted:function(e,t){P.dispatch({type:"PRICE",price:t})},valueLabelDisplay:"auto","aria-labelledby":"range-slider",max:3e3,min:0})]})},G=n(31),H=function(e){return{type:"LOADING",isLoading:e}},L=function(e){return{type:"IS_REDEEMHISTORY",isRedeemHistory:e}},W=function(){return function(e){console.log("se hizo fetch de Products"),e(H(!0)),fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmIyYzQ1NGI5NTIzZTAwMjA3ZTFmYzUiLCJpYXQiOjE2MDU1NTExODh9.KM9DA-3KKSQ4xg-AfoK9uNbOWw4gmRlgcCWcrAyWClA"}}).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"PRODUCTS",products:e}}(t)),e(L(!1)),e(H(!1))})).catch((function(e){console.error("Error fetchingProducts:",e)}))}},Y={fetchUserData:function(){return function(e){console.log("se hizo fetch de User"),e(H(!0)),fetch("https://coding-challenge-api.aerolab.co/user/me",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmIyYzQ1NGI5NTIzZTAwMjA3ZTFmYzUiLCJpYXQiOjE2MDU1NTExODh9.KM9DA-3KKSQ4xg-AfoK9uNbOWw4gmRlgcCWcrAyWClA"}}).then((function(e){return e.json()})).then((function(t){console.log("Usuario",t),e(function(e){return{type:"USER",user:e}}(t)),e(H(!1))})).catch((function(e){console.log("Error fetchUserData",e)}))}},fetchAddPoints:function(e){return function(t){console.log("se hizo fetch add points",e),fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmIyYzQ1NGI5NTIzZTAwMjA3ZTFmYzUiLCJpYXQiOjE2MDU1NTExODh9.KM9DA-3KKSQ4xg-AfoK9uNbOWw4gmRlgcCWcrAyWClA"},body:JSON.stringify({amount:e})}).then((function(e){return e.json()})).then((function(e){console.log("fetch exitoso, new points:",e["New Points"]),t({type:"ADDPOINTS",newPoints:e["New Points"]})})).catch((function(e){console.error("Error fetchingAddPoints:",e)}))}},fetchRedeemHistory:function(){return function(e){e(H(!0)),fetch("https://coding-challenge-api.aerolab.co/user/history",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmIyYzQ1NGI5NTIzZTAwMjA3ZTFmYzUiLCJpYXQiOjE2MDU1NTExODh9.KM9DA-3KKSQ4xg-AfoK9uNbOWw4gmRlgcCWcrAyWClA"}}).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"REDEEM_HISTORY",products:e}}(t))})).then(e(L(!0))).then(e(H(!1))).catch((function(e){return console.log("Error fetching Redeem History",e)}))}},fetchProducts:W},k=Object(G.b)((function(e){return{user:e.userReducer,isRedeemHistory:e.isRedeemHistoryReducer,products:e.productReducer}}),Y)((function(e){var t=e.user,n=e.isRedeemHistory,i=e.products,r=e.fetchUserData,a=e.fetchAddPoints,s=e.fetchRedeemHistory,h=e.fetchProducts,p=o.a.useState(null),m=Object(f.a)(p,2),x=m[0],y=m[1];o.a.useEffect((function(){r()}),[]);var C=i.map((function(e){return e.category})).filter((function(e,t){return i.map((function(e){return e.category})).indexOf(e)===t})),I=w();return Object(c.jsx)("div",{className:I.root,children:Object(c.jsx)(l.a,{position:"static",children:Object(c.jsxs)(u.a,{children:[Object(c.jsx)("div",{className:I.home,children:Object(c.jsx)(j.a,{className:I.homeButton,size:"large",color:"inherit",disabled:!n,onClick:function(){h()},children:Object(c.jsx)(d.a,{variant:"h6",children:"Home"})})}),Object(c.jsxs)("div",{className:I.filter,children:[Object(c.jsx)(d.a,{className:I.filterTypo,children:"Filtrar por:"}),Object(c.jsx)(U,{categorities:C}),Object(c.jsx)(M,{})]}),Object(c.jsxs)("div",{className:I.points,children:[Object(c.jsx)(J,{user:t,fetchAddPoints:a}),Object(c.jsx)(g.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){y(e.currentTarget)},color:"inherit",children:Object(c.jsx)(v.a,{})}),Object(c.jsxs)(b.a,{id:"menu-appbar",anchorEl:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(x),onClose:function(){y(null)},getContentAnchorEl:null,children:[Object(c.jsx)(O.a,{disabled:!0,children:null===t||void 0===t?void 0:t.name}),Object(c.jsx)(O.a,{onClick:function(){return y(null),void s()},children:"Redeem History"})]})]})]})})})})),K=n(137),Q=n(134),F=Object(s.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(6,0),padding:e.spacing(6,0)}}})),B=function(){var e=F();return Object(c.jsx)("div",{className:e.root,children:Object(c.jsx)(m.a,{color:"secondary",size:"8rem"})})},Z=n(131),X=n(132),V=n(133),_=Object(s.a)((function(e){return{image:{height:"140"},flexbox:{display:"flex"},button:{display:"flex",justifyContent:"flex-end"},iconbutton:{top:"auto",right:e.spacing(-1),bottom:e.spacing(2),left:"auto",position:"relative",margin:e.spacing(0)}}})),q=function(e){var t=e.product,n=e.isRedeemHistory,i=e.coins,o=e.fetchRedeemProduct,r=_();return Object(c.jsx)(Z.a,{children:Object(c.jsxs)(X.a,{children:[Object(c.jsx)("div",{className:r.flexbox,children:Object(c.jsx)(V.a,{component:"img",height:"220",className:r.image,image:t.img.url,alt:t.name})}),Object(c.jsx)(d.a,{variant:"subtitle2",color:"textSecondary",children:t.category}),Object(c.jsx)(d.a,{variant:"h6",children:t.name}),n?null:Object(c.jsx)("div",{className:r.button,children:Object(c.jsx)(j.a,{disabled:Boolean(i<t.cost),variant:"contained",color:"primary",size:"small",onClick:function(){return e=t._id,void o(e);var e},children:i>=t.cost?"Comprar":"Te faltan ".concat(t.cost-i," puntos")})})]})})},$=n(138),ee=Object(s.a)((function(e){return{container:{marginTop:e.spacing(2)},gridCard:{padding:e.spacing(1)},pagination:{display:"flex",justifyContent:"center"},paper:{position:"absolute",width:400,height:"15%",border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),top:"60%",left:"35%",display:"flex",justifyContent:"center",alignItems:"center"}}})),te=function(e){var t=e.products,n=e.isRedeemHistory,i=e.isLoading,r=e.filters,a=e.fetchProducts,s=e.coins,l=e.fetchRedeemProduct,u=e.redeemProduct,h=o.a.useState(1),p=Object(f.a)(h,2),j=p[0],g=p[1],b=o.a.useState(!1),O=Object(f.a)(b,2),m=O[0],x=O[1];o.a.useEffect((function(){a()}),[]),o.a.useEffect((function(){u&&x(!0)}),[u]),o.a.useEffect((function(){}),[r]);var y=Math.ceil(t.length/16),C=ee();console.log("Categoria de filter",r.category);var I=16*(j-1),v=I+16,R=t.filter((function(e){return r.category?e.category===r.category:e})).filter((function(e){return e.cost<=r.price[1]&&e.cost>=r.price[0]})).slice(I,v);return Object(c.jsxs)("main",{children:[Object(c.jsx)($.a,{open:m,onClose:function(){x(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(c.jsxs)("div",{style:{backgroundColor:"FAILED"===u?"#ff5722":"#76ff03"},className:C.paper,children:[Object(c.jsx)(d.a,{color:"textPrimary",children:"FAILED"===u?"Lo sentimos, tu producto no fue redimido, intenta de nuevo":"Has redimido el producto de forma exitosa!"}),"FAILED"===u?Object(c.jsx)(d.a,{children:"\u2639"}):Object(c.jsx)(d.a,{children:"\ud83d\ude01"})]})}),i?Object(c.jsx)(B,{}):Object(c.jsxs)(Q.a,{container:!0,className:C.container,children:[n?Object(c.jsx)(Q.a,{item:!0,xs:12,children:Object(c.jsx)(d.a,{children:"Los productos que has redimido son:"})}):null,R.map((function(e,t){return Object(c.jsx)(Q.a,{item:!0,xs:3,className:C.gridCard,children:Object(c.jsx)(q,{product:e,coins:s,isRedeemHistory:n,fetchRedeemProduct:l})},t)})),Object(c.jsx)(Q.a,{container:!0,className:C.pagination,children:Object(c.jsx)(K.a,{disabled:!Boolean(y),count:y,color:"secondary",onChange:function(e,t){return function(e){g(e)}(t)}})})]})]})},ne={fetchProducts:W,fetchRedeemProduct:function(e){return function(t){console.log("se va a hacer fetch del producto:",e),t({type:"RESET"}),fetch("https://coding-challenge-api.aerolab.co/redeem",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmIyYzQ1NGI5NTIzZTAwMjA3ZTFmYzUiLCJpYXQiOjE2MDU1NTExODh9.KM9DA-3KKSQ4xg-AfoK9uNbOWw4gmRlgcCWcrAyWClA"},body:JSON.stringify({productId:e})}).then((function(e){console.log(e.json()),t({type:"SUCCESS"})})).catch((function(e){console.log("Fall\xf3 fetch para redimir producto",e),t({type:"FAILED"})}))}}},ce=Object(G.b)((function(e,t){return{coins:e.userReducer.points,products:e.productReducer,isLoading:e.loadingReducer,isRedeemHistory:e.isRedeemHistoryReducer,filters:e.filtersReducer,redeemProduct:e.redeemProductReducer}}),ne)(te),ie=n(135),oe=n(70),re=Object(oe.a)({overrides:{MuiSlider:{thumb:{color:"grey"},track:{color:"white"},rail:{color:"black"}}}});var ae=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(ie.a,{theme:re,children:Object(c.jsxs)(G.a,{store:P,children:[Object(c.jsx)(p,{}),Object(c.jsx)(k,{}),Object(c.jsx)(ce,{})]})})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,143)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),o(e),r(e)}))};a.a.render(Object(c.jsx)(ae,{}),document.getElementById("root")),se()}},[[90,1,2]]]);
//# sourceMappingURL=main.a383ed8c.chunk.js.map